# HG changeset patch
# Parent  6ff487ac66f9797f2be1a2323116ae706f983ae0
Bug: https://gcc.gnu.org/bugzilla/show_bug.cgi?id=90756
Mozilla: https://bugzilla.mozilla.org/show_bug.cgi?id=1562886

diff -r 6ff487ac66f9 gfx/skia/skia/third_party/skcms/src/Transform_inl.h
--- a/gfx/skia/skia/third_party/skcms/src/Transform_inl.h	Tue Jul 16 14:37:45 2019 +0200
+++ b/gfx/skia/skia/third_party/skcms/src/Transform_inl.h	Fri Jul 19 10:26:35 2019 +0200
@@ -559,7 +559,8 @@
 
 // GCC 7.2.0 hits an internal compiler error with -finline-functions (or -O3)
 // when targeting MIPS 64,  I think attempting to inline clut() into exec_ops().
-#if 1 && defined(__GNUC__) && !defined(__clang__) && defined(__mips64)
+// s390x and i*86 also hit this with GCC 7.4 and -O2
+#if 1 && defined(__GNUC__) && !defined(__clang__) && ( defined(__mips64) || defined(__s390x__) || defined( __i586__ ) || defined( __i486__ ) || defined( __i386__ ))
     #define MAYBE_NOINLINE __attribute__((noinline))
 #else
     #define MAYBE_NOINLINE
